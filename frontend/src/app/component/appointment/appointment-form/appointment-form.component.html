<mat-card>
    <mat-card-title>Create an appointment</mat-card-title>
    <mat-card-content>
        <form [formGroup]="isStaff ? appointmentForm : userAppointmentForm" (ngSubmit)="onSubmitAppointment()">
            @if (isStaff) { <!-- needs edit -->
            <mat-form-field hideRequiredMarker="true" appearance="outline">
                <mat-label>User</mat-label>
                <input matInput formControlName="userId" placeholder="User">
            </mat-form-field>
            }

            <mat-form-field hideRequiredMarker="true" appearance="outline">
                <mat-label>Specialization</mat-label>
                <mat-select formControlName="specialization">
                    @for (specialization of specializations | async; track $index) {
                    <mat-option value={{specialization.id}}>{{specialization.name}}</mat-option>
                    }
                </mat-select>
                <!-- <mat-hint>Hint</mat-hint> -->
            </mat-form-field>

            <mat-form-field hideRequiredMarker="true" appearance="outline">
                <mat-label>Hospital</mat-label>
                <mat-select formControlName="hospital">
                    @for (hospital of hospitals | async; track $index) {
                    <mat-option value={{hospital.id}}>{{hospital.name}}</mat-option>
                    }
                </mat-select>
            </mat-form-field>

            <mat-form-field hideRequiredMarker="true" appearance="outline">
                <mat-label>Medic</mat-label>
                <!-- <mat-select formControlName="medic">
                    @for (medic of medics | async; track $index) {
                    <mat-option [value]="medic.id">{{medic.first_name}} {{medic.last_name}}</mat-option>
                    }
                </mat-select>  -->

                <input type="text" matInput formControlName="medic"
                    [matAutocomplete]="auto">
                <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayMedicOptions">
                    @for (medic of filteredMedics | async; track $index) {
                    <mat-option [value]="medic.id">{{medic.first_name}} {{medic.last_name}}</mat-option>
                    }
                </mat-autocomplete>

            </mat-form-field>

            <mat-form-field hideRequiredMarker="true" appearance="outline">
                <mat-label>Choose a date</mat-label>
                <input matInput [min]="minDate" [max]="maxDate" [matDatepicker]="datepicker" formControlName="date">
                <mat-hint>MM/DD/YYYY</mat-hint>
                <mat-datepicker-toggle matIconSuffix [for]="datepicker"></mat-datepicker-toggle>
                <mat-datepicker #datepicker></mat-datepicker>
            </mat-form-field>

            <mat-form-field hideRequiredMarker="true" appearance="outline">
                <mat-label>Time</mat-label>
                <mat-select formControlName="time">
                    <mat-option value="08:00">8:00</mat-option>
                    <mat-option value="09:00">9:00</mat-option>
                    <mat-option value="10:00">10:00</mat-option>
                    <mat-option value="11:00">11:00</mat-option>
                    <mat-option value="12:00">12:00</mat-option>
                    <mat-option value="13:00">13:00</mat-option>
                    <mat-option value="14:00">14:00</mat-option>
                    <mat-option value="15:00">15:00</mat-option>
                    <mat-option value="16:00">16:00</mat-option>
                    <mat-option value="17:00">17:00</mat-option>
                    <mat-option value="18:00">18:00</mat-option>
                    <mat-option value="19:00">19:00</mat-option>
                    <mat-option value="20:00">20:00</mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field hideRequiredMarker="true" appearance="outline">
                <mat-label>Description</mat-label>
                <textarea matInput formControlName="description" placeholder="Description"></textarea>
                <!-- <mat-hint>Hint</mat-hint> -->
            </mat-form-field>

            <button mat-flat-button color="primary" type="submit">Submit</button>

        </form>
    </mat-card-content>
</mat-card>